{"version":3,"file":"membrane.min.js","sources":["membrane.js"],"names":["define","__dependency1__","__exports__","MJS","MSystem","params","_","assign","this","membrane","world","prototype","clone","cloneDeep","simulate","stepLimit","outCome","log","i","toString","step","dissolved","worldToString","setToString","__dependency2__","shuffle","o","j","x","length","Math","floor","random","Rule","idCounter","Membrane","rules","membranes","label","charge","id","map","rule","externalWorld","self","anyRulesApplied","hasDissolved","result","splice","applicableRules","forEach","times","numberApplications","push","oldWorld","applyRule","isObject","count","symbol","type","Type","DISSOLVE","children","slice","msg","console","$","prepend","set","chars","join","selectRandomIn","xs","cloneObjectArray","EVOLVE","reactants","products","childrenMembranes","applied","num","tempWorld","sendOutSet","isArray","SEND_IN","w","SEND_OUT","keys"],"mappings":"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"}